//=========================================================
//
//  @package Wicle WDK
//  @module functions/conf
//
//=========================================================

@import "string";
@import "map";

//
//  Get vale from the configuration database
//    @param  {Map}      $conf   configuration database
//    @param  {string}   $path   path to store value
//    @return {Any}      Value extracted
//
//  Examples
//    $conf: ()
//    w-conf-set($conf, 'A/B/C', 123) --> ("A": ("B": ("C": 123)))
//    w-conf-get($conf, 'A/B/C')      --> 123
//
//
@function w-conf-get($conf, $path) {
  @return map-deep-get($conf, str-split($path,'/',''));
}

//
//  Store value into the specified path
//    @param  {Map}       $conf   configuration database
//    @param  {string}    $path   path to store value
//    @param  {Any}       $val    Value to store
//    @return {Map}       Resulting configuration database
//
//  Examples
//    $conf: ()
//    w-conf-set($conf, 'A/B/C', 123) --> ("A": ("B": ("C": 123)))
//    w-conf-set($conf, 'A:B:C', 456) --> ("A": ("B": ("C": 456)))
//    w-conf-get($conf, 'A/B/C') --> 456
//    w-conf-set($conf, '/B/C', 789) --> ("": ("B": ("C": 456)))
//    w-conf-set($conf, '//B/C', 789) --> ("": ("": ("B": ("C": 123))))
//    w-conf-get($conf, '//B/C') --> 789
//
@function w-conf-set($conf, $path, $val, $default:false) {
  // if default option is set, return without storing
  @if $default and w-conf-get($conf, $path) { @return $conf; }
  @return map-deep-set($conf, str-split($path,'/:',''), $val);
}

//  Set Config Value: shortcut for w-conf-set
@function scv($conf, $path, $value, $default:false) {
  //$path: str-trim($path, left, '/');
  @return w-conf-set($conf, $path, $value, $default);
}

//  Get Config Value: shortcut for w-conf-get
@function gcv($conf, $path) {
  //$path: str-trim($path, left, '/');
  @return w-conf-get($conf, $path);
}
