//=========================================================
//
//  @package Wicle
//  @module ui/components/panel
//
//=========================================================

@import "../../../wdk/wdk";

// shortcut function: valid only in this file
@function cv($path:null) {  @return gsv('w-panel', $path);  }


//-----------------------------------------------
// mixin's
//-----------------------------------------------
@mixin w-panel-init {
  @if mixin-exists(w-hook-panel-init) { @include w-hook-panel-init(); }

  //--- globals variables
  $w-panel-generate-classes: true !default !global; // enable class generation

  //-- local variables
  $key: 'w-panel';

  //--- core
  @include ssv($key, 'padding', 0.75rem 1rem, true);
  @include ssv($key, 'border', 1px solid gray(85%), true);
  @include ssv($key, 'radius', $w-border-radius, true);

  //--- styles
  @include ssv($key, 'bg', white, true);

  @if mixin-exists(w-hook-panel-override) { @include w-hook-panel-override(); }
}

@mixin w-panel-core {
  display: block;
  position: relative;
  padding: cv(padding);
  border-radius: cv(radius);
  border: cv(border);
}


@mixin w-panel-styles($bg:cv(bg), $alpha:false) {
  $fg: yiq-color($bg);
  //@debug $color --- yiq-color($color);
  $line: smart-scale($bg, 20%);

  @if $alpha {
    $fg: $w-color-text-black;
    $bg: transparentize($bg, 0.95);
  }
  color: $fg;
  background: $bg;
  border-color: transparentize($line, 0.7);
}

@mixin w-panel-options {
  &.wo-alpha {
    @include w-panel-styles($w-color-text-white, true)
  }

  // color scheme
  @each $scheme in $w-color-scheme {
    $name: nth($scheme, 1);
    $color: nth($scheme, 2);
    &.wo-#{$name} {
      @include w-panel-styles($color);
    }
    // alpha mode (semi transparent)
    &.wo-#{$name}.wo-alpha {
      @include w-panel-styles($color, true);
    }
  }
}


//-----------------------------------------------
//  module init
//-----------------------------------------------
@include w-panel-init;


//-----------------------------------------------
//  class generation
//-----------------------------------------------
@if $w-wicle-mode == 'css' and $w-panel-generate-classes {
  .w-panel {
    @include w-panel-core;
    @include w-panel-styles;
    @include w-panel-options;
  }
}

@if mixin-exists(w-hook-panel) { @include w-hook-panel(); }